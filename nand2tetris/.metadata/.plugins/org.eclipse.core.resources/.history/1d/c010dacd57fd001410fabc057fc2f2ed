package VMtranslator;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.util.NoSuchElementException;


public class CodeWriter {

	File file;
	FileOutputStream out;
	OutputStreamWriter writer;
	StringBuilder data;
	String outfile;
	
	CodeWriter(String outfile) throws IOException{
		this.outfile = outfile;
		file = new File(outfile);
		out = new FileOutputStream(file);
		writer = new OutputStreamWriter(out);
		data = new StringBuilder();
	}
	
	void setFileName(String fileName) throws IOException{
		this.outfile = fileName;
		file = new File(outfile);
		out = new FileOutputStream(file);
		writer = new OutputStreamWriter(out);
		data = new StringBuilder();
	}
	
	void writeArithmetic(String command) throws Exception{
		if(command.equals("add")){
			writer.write("@SP\nAM=M-1\nD=M\n@SP\nAM=M-1\nA=M\nD=A+D");
		}else if(command.equals("sub")){
			writer.write("@SP\nAM=M-1\nD=M\n@SP\nAM=M-1\nA=M\nD=A-D");
		}else if(command.equals("neg")){			
		}else if(command.equals("eq")){
		}else if(command.equals("gt")){
		}else if(command.equals("lt")){
		}else if(command.equals("and")){
			writer.write("@SP\nAM=M-1\nD=M\n@SP\nAM=M-1\nA=M\nD=A&D");
		}else if(command.equals("or")){
			writer.write("@SP\nAM=M-1\nD=M\n@SP\nAM=M-1\nA=M\nD=A|D");
		}else if(command.equals("not")){
		}else{
			throw new Exception();
		}
			
		
		
	}
	
	void writePushPop(String command, String segment, int index){
		String arg1, arg2, type;
		String[] cmds = command.split(" ");
		type = cmds[0].toLowerCase();
		if(cmds.length > 1) arg1 = cmds[1].toLowerCase();
		else{
			arg1 = "";
		}
		if(cmds.length > 2) arg2 = cmds[2].toLowerCase();
		else{
			arg2 = "";
		}
	}
}
